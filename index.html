<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أحمد النهدي - مصمم جرافيك</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #000000;
            --text-color: #EAEAEA;
            --accent-color: #00ff3a; /* أخضر نيوني */
            --accent-color-dark: #00cc2e;
            --accent-color-glow: rgba(0, 255, 58, 0.4);
            --card-bg-color: #111111;
            --card-border-color: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'IBM Plex Sans Arabic', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            text-align: center;
            overflow-x: hidden;
        }
        
        /* --- Preloader --- */
        .preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg-color); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        .preloader.hidden { opacity: 0; visibility: hidden; }
        .loader {
            width: 50px; height: 50px;
            border: 5px solid var(--card-border-color);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* --- Header --- */
        .page-header {
            position: fixed; top: 0; left: 0; width: 100%;
            padding: 1.5rem 2.5rem;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 100;
            transition: background-color 0.3s;
        }
        .page-header.scrolled {
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }
        .logo { font-weight: 700; font-size: 1.5rem; }


        /* --- Hero Section --- */
        .hero-section {
            position: relative; height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            overflow: hidden; padding: 2rem;
        }
        .hero-bg {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(ellipse at 50% 150%, rgba(0, 255, 58, 0.15) 0%, transparent 70%);
            z-index: 0;
            overflow: hidden; 
        }
        
        .hero-bg::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40vw;
            max-width: 500px;
            height: 100%;
            background-image: url('Artboard 1.png'); 
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            transform: translate(-50%, -50%) rotate(-15deg);
            opacity: 0.05; 
            z-index: 0;
        }
        
        .hero-content { position: relative; z-index: 2; animation: popIn 1s ease-out 0.5s backwards; }
        .hero-title {
            font-size: 5rem; font-weight: 700;
            max-width: 900px; letter-spacing: -2px;
            text-shadow: 0 5px 25px rgba(0,0,0,0.5);
            line-height: 1.2;
        }
        .hero-title .highlight { color: var(--accent-color); }
        .hero-subtitle {
            font-size: 1.2rem; max-width: 600px;
            margin: 1.5rem auto 2.5rem;
            color: rgba(255,255,255,0.8);
            font-weight: 300;
        }
       
        /* --- Section Shared Styles --- */
        .section { padding: 6rem 2rem; position: relative; }
        .section-title { font-size: 3rem; font-weight: 700; margin-bottom: 4rem; }
        
        /* --- Portfolio Section --- */
        .portfolio-filters {
            display: flex; justify-content: center;
            gap: 1rem; margin-bottom: 3rem;
            flex-wrap: wrap;
        }
        .filter-btn {
            background: none; border: 1px solid var(--card-border-color);
            color: var(--text-color); padding: 0.5rem 1.5rem;
            border-radius: 50px; cursor: pointer; transition: all 0.3s;
        }
        .filter-btn:hover, .filter-btn.active {
            background-color: var(--accent-color);
            border-color: var(--accent-color); color: #000;
        }

        .portfolio-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem; max-width: 1200px; margin: auto;
        }
        .portfolio-card {
            background-color: var(--card-bg-color);
            border-radius: 16px; overflow: hidden;
            transition: all 0.4s; cursor: pointer;
            position: relative;
        }
        .portfolio-card.hidden { transform: scale(0.9); opacity: 0; display: none; }
        .portfolio-card:hover::before { opacity: 1; }
        .portfolio-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 16px;
            background: radial-gradient(400px circle at var(--mouse-x) var(--mouse-y), rgba(0, 255, 58, 0.2), transparent 40%);
            z-index: 1; opacity: 0; transition: opacity 0.3s;
            pointer-events: none;
        }
        
        .portfolio-card .card-image { overflow: hidden; position: relative; z-index: 0; }
        .portfolio-card img {
            width: 100%; height: 250px; object-fit: cover;
            display: block; transition: transform 0.4s;
        }
        .portfolio-card:hover img { transform: scale(1.05); }
        .portfolio-card-content { padding: 1.5rem; text-align: right; position: relative; z-index: 2; }
        .portfolio-card-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .portfolio-card-category { font-size: 0.9rem; font-weight: 500; color: var(--accent-color); }
        
        /* --- Services Section --- */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: auto;
        }
        .service-card {
            background-color: var(--card-bg-color);
            border: 1px solid var(--card-border-color);
            border-radius: 16px;
            padding: 2.5rem 2rem;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
        }
        .service-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-color);
            box-shadow: 0 10px 30px rgba(0, 255, 58, 0.1);
        }
        .service-card-icon {
            color: var(--accent-color);
            margin-bottom: 1.5rem;
        }
        .service-card-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .service-card-description {
            color: rgba(255,255,255,0.7);
            font-weight: 300;
            max-width: 300px;
            margin: 0 auto;
        }

        /* --- About Me Section --- */
        .about-section {
             background-color: #050505;
        }
        .about-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4rem;
            max-width: 1100px;
            margin: auto;
            flex-wrap: wrap;
        }
        .about-image-wrapper {
            flex: 1;
            min-width: 280px;
            max-width: 350px;
        }
        .about-image {
            width: 100%;
            border-radius: 50%;
            border: 5px solid var(--card-border-color);
            box-shadow: 0 0 40px rgba(0, 255, 58, 0.15);
        }
        .about-content {
            flex: 1.5;
            min-width: 300px;
            text-align: right;
        }
        .about-content h3 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }
        .about-content .highlight {
            color: var(--accent-color);
        }
        .about-content p {
            font-size: 1.1rem;
            color: rgba(255,255,255,0.8);
            margin-bottom: 1rem;
        }
        
        /* --- Testimonials Section --- */
        .testimonial-slider {
            max-width: 800px; margin: auto; position: relative;
            padding: 2rem;
            border: 1px solid var(--card-border-color);
            background-color: var(--card-bg-color);
            border-radius: 16px;
        }
        .testimonial-slider::before {
            content: '“';
            font-family: serif;
            font-size: 10rem;
            color: rgba(255, 255, 255, 0.05);
            position: absolute;
            top: -1rem;
            right: 1.5rem;
            z-index: 0;
            line-height: 1;
        }
        .testimonial-quotes-container {
            position: relative;
            min-height: 150px;
            margin-bottom: 2rem;
            z-index: 1;
        }
        .testimonial-quote {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            pointer-events: none;
        }
        .testimonial-quote.active {
            position: relative;
            opacity: 1;
            pointer-events: auto;
        }
        .testimonial-text { font-size: 1.3rem; font-weight: 400; margin-bottom: 1rem; color: rgba(255,255,255,0.9); }
        .testimonial-author { font-weight: 700; font-size: 1.1rem; }
        .testimonial-author span { font-weight: 400; font-size: 0.9rem; color: rgba(255,255,255,0.6); display: block; margin-top: 0.2rem;}

        .testimonial-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--card-border-color);
            flex-wrap: wrap;
        }
        .testimonial-nav-author {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            opacity: 0.5;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .testimonial-nav-author.active,
        .testimonial-nav-author:hover {
            opacity: 1;
            border-color: var(--accent-color);
            transform: scale(1.1);
        }
        
        /* --- Partners Section --- */
        .partners-container {
            max-width: 1200px; margin: auto;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            align-items: center; gap: 2rem;
        }
        
        .partner-logo-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            padding: 1rem;
            background-color: var(--card-bg-color);
            border-radius: 12px;
            border: 1px solid var(--card-border-color);
        }

        .partner-logo {
            max-width: 100%;
            max-height: 75px; 
            object-fit: contain;
        }
        
        /* --- CTA Section --- */
        .cta-section { padding: 0 2rem; }
        .cta-container {
            max-width: 1000px; margin: auto; background: linear-gradient(135deg, #0a0a0a, #111111);
            border: 1px solid var(--card-border-color); border-radius: 24px; padding: 4rem 2rem;
            position: relative; overflow: hidden;
            text-align: center;
        }
        .cta-container::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at 80% 20%, var(--accent-color-glow), transparent 70%); opacity: 0.5; }
        .cta-title { font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 1rem; position: relative; z-index: 1; }
        .cta-subtitle { font-size: 1.2rem; max-width: 600px; color: rgba(255,255,255,0.8); margin-bottom: 2rem; font-weight: 300; position: relative; z-index: 1; margin-left: auto; margin-right: auto;}
        .cta-button-contact {
            background: var(--accent-color); color: #000; border: 1px solid transparent; padding: 1rem 3rem;
            font-size: 1.2rem; font-weight: 700; border-radius: 50px; cursor: pointer; text-decoration: none;
            transition: all 0.3s; position: relative; z-index: 1;
        }
        .cta-button-contact:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--accent-color-glow); }
        
        /* --- Footer --- */
        .page-footer { padding: 8rem 2rem 2rem; }
        .footer-content { display: flex; flex-direction: column; align-items: center; gap: 2rem; }
        .social-links { display: flex; gap: 1.5rem; }
        .social-links a { color: rgba(255, 255, 255, 0.6); transition: color 0.3s, transform 0.3s; }
        .social-links a:hover { color: var(--text-color); transform: translateY(-3px); }
        .copyright { font-size: 0.8rem; color: rgba(255, 255, 255, 0.4); }
        .copyright .admin-trigger { opacity: 0.02; cursor: pointer; transition: opacity 0.3s;}
        .copyright .admin-trigger:hover { opacity: 0.2; }

        /* --- Modal --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px);
            z-index: 101; display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .modal-overlay.visible { opacity: 1; pointer-events: all; }
        .modal-content {
            background: #1a1a1a; padding: 2.5rem; border-radius: 16px;
            border: 1px solid var(--card-border-color); width: 90%;
            max-width: 450px; position: relative;
            transform: scale(0.95); transition: transform 0.3s ease;
        }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-close {
            position: absolute; top: 1rem; right: 1rem; background: none;
            border: none; color: #888; cursor: pointer;
            font-size: 1.5rem; transition: color 0.2s; z-index: 102;
        }
        .modal-close:hover { color: var(--text-color); }
        .modal-title { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
        .modal-subtitle { font-size: 1rem; color: #aaa; margin-bottom: 2.5rem; font-weight: 300; }
        
        .modal-overlay.case-study .modal-content {
            max-width: 800px; text-align: right;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
        }
        .case-study-header {
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--card-border-color);
            flex-shrink: 0;
        }
        .case-study-body {
            overflow-y: auto;
            padding-top: 1.5rem;
            -webkit-overflow-scrolling: touch;
        }

        .modal-input, .modal-textarea {
            width: 100%; padding: 1rem; margin-bottom: 1rem; background: transparent;
            border: 1px solid #333; border-radius: 12px;
            color: var(--text-color); font-family: inherit; resize: vertical;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .modal-input:focus, .modal-textarea:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 15px var(--accent-color-glow); }
        .modal-button {
            width: 100%; padding: 1rem; background: var(--accent-color);
            color: #000; border: none; border-radius: 12px;
            cursor: pointer; font-weight: 700; transition: all 0.3s;
        }
        .modal-button:hover { filter: brightness(1.2); transform: translateY(-2px); box-shadow: 0 5px 15px var(--accent-color-glow); }
        #form-success-message { display:none; color: var(--accent-color); text-align: center; margin-top: 1rem; font-weight: 500;}

        /* --- Scroll to Top Button --- */
        .scroll-to-top {
            position: fixed; bottom: 2rem; left: 2rem; background-color: var(--accent-color);
            color: #000; width: 50px; height: 50px; border-radius: 50%; border: none;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.5rem; cursor: pointer; opacity: 0; visibility: hidden;
            transform: translateY(20px); transition: all 0.3s; z-index: 99;
        }
        .scroll-to-top.visible { opacity: 1; visibility: visible; transform: translateY(0); }
        
        /* --- Animations --- */
        .animate-on-scroll { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

        @media (max-width: 768px) {
            .page-header { padding: 1rem; justify-content: center; }
            .logo { flex-grow: 1; text-align: center; }
            
            .hero-title { font-size: 2.8rem; }
            .hero-subtitle { font-size: 1rem; }
            .section { padding: 4rem 1rem; }
            .section-title { font-size: 2.2rem; margin-bottom: 2rem; }
            .cta-title { font-size: 1.8rem; }
            .testimonial-text { font-size: 1.1rem; }
            .about-container { flex-direction: column; text-align: center; }
            .about-content { text-align: center; }

            .partners-container {
                grid-template-columns: repeat(3, 1fr);
                gap: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="preloader">
        <div class="loader"></div>
    </div>

    <header class="page-header">
        <div class="logo">أحمد النهدي</div>
    </header>
    
    <main>
        <section class="hero-section">
            <div class="hero-bg"></div>
            <div class="hero-content">
                <h1 class="hero-title">
                    أصمم تجارب بصرية<br>تصنع <span class="highlight">الفارق</span>
                </h1>
                <p class="hero-subtitle">مصمم متخصص في بناء هويات بصرية واستراتيجيات إبداعية تساعد العلامات التجارية على النمو والتميز.</p>
            </div>
        </section>

        <section class="section portfolio-section" id="portfolio">
             <h2 class="section-title animate-on-scroll">أعمالي</h2>
             <div class="portfolio-filters animate-on-scroll">
                 <button class="filter-btn active" data-filter="all">الكل</button>
                 <button class="filter-btn" data-filter="branding">علامات تجارية</button>
                 <button class="filter-btn" data-filter="uiux">واجهات مستخدم</button>
             </div>
            <div class="portfolio-grid animate-on-scroll" id="portfolio-grid-container">
                </div>
        </section>

        <section class="section services-section" id="services">
            <h2 class="section-title animate-on-scroll">خدماتي</h2>
            <div class="services-grid">
                <div class="service-card animate-on-scroll">
                    <div class="service-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>
                    </div>
                    <h3 class="service-card-title">بناء الهويات البصرية</h3>
                    <p class="service-card-description">أصمم شعارات واستراتيجيات بصرية متكاملة تروي قصة علامتك التجارية وتصنع لها بصمة فريدة في السوق.</p>
                </div>
                <div class="service-card animate-on-scroll">
                    <div class="service-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
                    </div>
                    <h3 class="service-card-title">تصميم واجهات المستخدم</h3>
                    <p class="service-card-description">أصمم تجارب استخدام ممتعة وسهلة للمواقع والتطبيقات، مع التركيز على تحقيق أهداف المستخدمين وأهدافك التجارية.</p>
                </div>
                <div class="service-card animate-on-scroll">
                    <div class="service-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>
                    </div>
                    <h3 class="service-card-title">استشارات إبداعية</h3>
                    <p class="service-card-description">أقدم استشارات متخصصة لمساعدتك على تطوير استراتيجيتك الإبداعية واتخاذ قرارات تصميمية تخدم رؤيتك المستقبلية.</p>
                </div>
            </div>
        </section>

        <section class="section about-section" id="about">
            <h2 class="section-title animate-on-scroll">نبذة عني</h2>
            <div class="about-container">
                <div class="about-image-wrapper animate-on-scroll">
                    <img src="https://via.placeholder.com/400" alt="أحمد النهدي" class="about-image">
                </div>
                <div class="about-content animate-on-scroll">
                    <h3>مصمم بصري شغوف بتحويل الأفكار إلى <span class="highlight">تجارب لا تُنسى</span></h3>
                    <p>
                        أؤمن بأن التصميم الجيد ليس مجرد شكل جميل، بل هو حوار بين العلامة التجارية وجمهورها. بخبرة تمتد لسنوات في مجال تصميم الهويات البصرية وواجهات المستخدم، أساعد الشركات على سرد قصتها بطريقة مؤثرة وواضحة.
                    </p>
                    <p>
                        أركز دائماً على فهم أهداف عملائي العميقة لتقديم حلول تصميمية ليست فقط جذابة بصرياً، بل تخدم أهدافاً استراتيجية وتحقق نتائج ملموسة.
                    </p>
                </div>
            </div>
        </section>

        <section class="section testimonials-section" id="testimonials">
             <h2 class="section-title animate-on-scroll">ماذا يقول عملائي</h2>
            <div class="testimonial-slider animate-on-scroll" id="testimonial-slider">
                </div>
        </section>

        <section class="section partners-section">
            <h2 class="section-title animate-on-scroll">عملت مع</h2>
            <div class="partners-container animate-on-scroll" id="partners-container">
                </div>
        </section>

        <section class="section cta-section" id="contact">
            <div class="cta-container animate-on-scroll">
                 <h2 class="cta-title">هل لديك فكرة مشروع؟</h2>
                 <p class="cta-subtitle">لنجعلها حقيقة. أنا مستعد للاستماع وتحويل رؤيتك إلى واقع ملموس.</p>
                 <button class="cta-button-contact" id="modal-open-cta">تواصل معي الآن</button>
            </div>
        </section>
    </main>

    <footer class="page-footer">
        <div class="footer-content animate-on-scroll">
            <div class="logo">أحمد النهدي</div>
            <div class="social-links">
                <a href="#" target="_blank" aria-label="Behance"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14.165 11.293c.186-.33.295-.712.295-1.117 0-1.18-.86-2.172-1.922-2.172h-3.41v4.34h3.355c1.078 0 1.98-.98 1.98-2.05zm-.31 1.074h-2.28V9.998h2.24c.48 0 .88.423.88.94 0 .516-.4.93-.84.93zM22 12.01c0-1.093-.883-1.985-1.99-1.985h-2.032v.56c0-.012.02-.23.02-.23.13-1.46-1.02-2.73-2.49-2.73H7.5V1h8.483c1.338 0 2.423 1.062 2.423 2.37 0 .39-.094.75-.26 1.07.38.16.63.53.63.95 0 .59-.47.98-1.03.98h-2.1v.02h2.1c.76 0 1.36.63 1.36 1.38 0 .75-.6 1.37-1.36 1.37h-3.142c-1.63 0-3.022-1.32-3.022-2.95V4.5H4.5v15h9.335c1.55 0 2.95-1.28 2.95-2.85 0-1.06-.59-1.98-1.455-2.45.62-.28 1.04-.9 1.04-1.61zm-7.665 6.27h-2.28v-3.48h2.28c.63 0 1.15.52 1.15 1.15 0 .63-.52 1.15-1.15 1.15z"/></svg></a>
                <a href="#" target="_blank" aria-label="Instagram"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line></svg></a>
                <a href="#" target="_blank" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a>
            </div>
            <p class="copyright">© 2025 كل الحقوق محفوظة. <span class="admin-trigger">admin</span></p>
        </div>
    </footer>

    <div class="modal-overlay" id="contact-modal">
        <div class="modal-content">
            <button class="modal-close" id="contact-modal-close-button">&times;</button>
            <h3 class="modal-title">اطلب خدمة</h3>
            <p class="modal-subtitle">هل لديك فكرة مشروع؟ لنتحدث عنها!</p>
            <form id="contact-form">
                <input type="text" class="modal-input" placeholder="اسمك" required>
                <input type="email" class="modal-input" placeholder="بريدك الإلكتروني" required>
                <textarea class="modal-input" rows="4" placeholder="صف مشروعك" required></textarea>
                <button type="submit" class="modal-button">إرسال الطلب</button>
                <p id="form-success-message" style="display:none; color: var(--accent-color); text-align: center; margin-top: 1rem; font-weight: 500;">شكرًا لك! تم استلام طلبك وسأرد عليك قريبًا.</p>
            </form>
        </div>
    </div>
    <div class="modal-overlay case-study" id="case-study-modal">
        </div>

    <button class="scroll-to-top" id="scroll-to-top-btn">↑</button>

    <script>
    let siteData = {};
    
    document.addEventListener('DOMContentLoaded', async () => {
        const preloader = document.querySelector('.preloader');
        try {
            const response = await fetch('data.json?v=' + new Date().getTime()); // Prevent caching
            if (!response.ok) throw new Error('Network response was not ok');
            siteData = await response.json();
            
            renderPortfolio();
            renderTestimonials();
            renderPartners();
            
            initializeScripts();

        } catch (error) {
            console.error('Failed to load site data:', error);
            document.body.innerHTML = '<h1 style="color:white; text-align:center; margin-top: 5rem;">Error loading content. Please check data.json file.</h1>';
        } finally {
            preloader.classList.add('hidden');
        }
    });

    function renderPortfolio() {
        const container = document.getElementById('portfolio-grid-container');
        if (!container || !siteData.portfolio) return;
        container.innerHTML = siteData.portfolio.map(project => `
            <div class="portfolio-card" data-category="${project.category}" data-project-id="${project.id}">
                <div class="card-image"><img src="${project.image}" alt="${project.title}"></div>
                <div class="portfolio-card-content">
                    <h3 class="portfolio-card-title">${project.title}</h3>
                    <p class="portfolio-card-category">${project.card_category}</p>
                </div>
            </div>
        `).join('');
    }

    function renderTestimonials() {
        const container = document.getElementById('testimonial-slider');
        if (!container || !siteData.testimonials || siteData.testimonials.length === 0) return;

        const quotesHtml = siteData.testimonials.map((t, index) => `
            <div class="testimonial-quote ${index === 0 ? 'active' : ''}" data-index="${index}">
                <p class="testimonial-text">"${t.text}"</p>
                <div class="testimonial-author">${t.author}<span>${t.position}</span></div>
            </div>
        `).join('');

        const navHtml = siteData.testimonials.map((t, index) => `
            <img src="${t.image}" alt="${t.author}" class="testimonial-nav-author ${index === 0 ? 'active' : ''}" data-index="${index}">
        `).join('');

        container.innerHTML = `
            <div class="testimonial-quotes-container">
                ${quotesHtml}
            </div>
            <div class="testimonial-nav">
                ${navHtml}
            </div>
        `;
    }


    function renderPartners() {
        const container = document.getElementById('partners-container');
        if (!container || !siteData.partners) return;
        container.innerHTML = siteData.partners.map(p => `
            <div class="partner-logo-wrapper">
                <img src="${p.logo}" alt="${p.name}" class="partner-logo">
            </div>
        `).join('');
    }

    function initializeScripts() {
        // --- Header Scroll Effect ---
        const header = document.querySelector('.page-header');
        window.addEventListener('scroll', () => {
            header.classList.toggle('scrolled', window.scrollY > 50);
        });

        // --- Scroll Animations ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { 
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible'); 
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));
        
        // --- Portfolio Card Hover Effect ---
        const cards = document.querySelectorAll('.portfolio-card');
        cards.forEach(card => {
            card.addEventListener('mousemove', e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
            });
        });

        // --- Portfolio Filter ---
        const filterButtons = document.querySelectorAll('.filter-btn');
        const portfolioCards = document.querySelectorAll('.portfolio-card');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                const filter = button.dataset.filter;
                portfolioCards.forEach(card => {
                    card.style.display = 'block';
                    if (filter === 'all' || card.dataset.category === filter) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            });
        });

        // --- Testimonial Slider ---
        const slider = document.getElementById('testimonial-slider');
        if (slider && siteData.testimonials && siteData.testimonials.length > 0) {
            const quotes = slider.querySelectorAll('.testimonial-quote');
            const navAuthors = slider.querySelectorAll('.testimonial-nav-author');
            let currentIndex = 0;
            let slideInterval;

            const moveToSlide = (index) => {
                if (index === currentIndex && document.querySelector('.testimonial-quote.active')) return;

                const currentQuote = slider.querySelector('.testimonial-quote.active');
                const currentNav = slider.querySelector('.testimonial-nav-author.active');
                
                if(currentQuote) currentQuote.classList.remove('active');
                if(currentNav) currentNav.classList.remove('active');
                
                quotes[index].classList.add('active');
                navAuthors[index].classList.add('active');
                currentIndex = index;
            };

            const nextSlide = () => {
                const nextIndex = (currentIndex + 1) % quotes.length;
                moveToSlide(nextIndex);
            };

            navAuthors.forEach(nav => {
                nav.addEventListener('click', () => {
                    const newIndex = parseInt(nav.dataset.index);
                    moveToSlide(newIndex);
                    // Reset interval on manual click
                    clearInterval(slideInterval);
                    slideInterval = setInterval(nextSlide, 8000);
                });
            });

            // Auto-play
            slideInterval = setInterval(nextSlide, 5000);
        }
        
        // --- Case Study Modal ---
        const caseStudyModal = document.getElementById('case-study-modal');
        const openCaseStudyModal = (projectTitle) => {
            const data = siteData.portfolio.find(p => p.title === projectTitle);
            if (!data || !data.details || !caseStudyModal) {
                 console.error('Project data or details not found for:', projectTitle);
                 return;
            }

            let modalBodyHtml = '';
            if (data.details.content && Array.isArray(data.details.content)) {
                data.details.content.forEach(block => {
                    if (block.type === 'image' && block.value) {
                        modalBodyHtml += `<img src="${block.value}" alt="${data.details.title}" style="width: 100%; border-radius: 8px; margin-bottom: 1rem;">`;
                    } else if (block.type === 'text' && block.value) {
                        modalBodyHtml += `<div>${block.value}</div>`;
                    }
                });
            }

            caseStudyModal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" id="case-study-close-button">&times;</button>
                    <div class="case-study-header">
                        <h3 class="modal-title">${data.details.title}</h3>
                        <p style="color: var(--accent-color); margin-bottom: 0; font-weight: 500;">${data.details.category}</p>
                    </div>
                    <div class="case-study-body">
                        ${modalBodyHtml}
                    </div>
                </div>
            `;
            caseStudyModal.classList.add('visible');
            document.getElementById('case-study-close-button').addEventListener('click', closeCaseStudyModal);
        };
        const closeCaseStudyModal = () => caseStudyModal.classList.remove('visible');

        document.querySelectorAll('.portfolio-card').forEach(card => {
            card.addEventListener('click', () => {
                const title = card.querySelector('.portfolio-card-title').textContent;
                openCaseStudyModal(title);
            });
        });
        caseStudyModal.addEventListener('click', e => { if (e.target === caseStudyModal) closeCaseStudyModal(); });

        // --- Contact Modal ---
        const contactModal = document.getElementById('contact-modal');
        const openContactButtons = document.querySelectorAll('#modal-open-cta');
        const closeContactButton = document.getElementById('contact-modal-close-button');
        const contactForm = document.getElementById('contact-form');
        const successMessage = document.getElementById('form-success-message');

        const openContactModal = (e) => { e.preventDefault(); contactModal.classList.add('visible'); };
        const closeContactModal = () => { contactModal.classList.remove('visible'); };
        openContactButtons.forEach(button => button.addEventListener('click', openContactModal));
        if (closeContactButton) closeContactButton.addEventListener('click', closeContactModal);
        if (contactModal) contactModal.addEventListener('click', e => { if (e.target === contactModal) closeContactModal(); });
        if(contactForm) {
            contactForm.addEventListener('submit', e => {
                e.preventDefault();
                successMessage.style.display = 'block';
                setTimeout(() => {
                    closeContactModal();
                    setTimeout(() => {
                       successMessage.style.display = 'none';
                       contactForm.reset();
                    }, 300);
                }, 2000);
            });
        }

        // --- Scroll to Top Button ---
        const scrollTopBtn = document.getElementById('scroll-to-top-btn');
        window.addEventListener('scroll', () => {
            if(scrollTopBtn) scrollTopBtn.classList.toggle('visible', window.scrollY > 300);
        });
        if(scrollTopBtn) scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // --- ADMIN LOGIN ---
        const adminTrigger = document.querySelector('.admin-trigger');
        if(adminTrigger) {
            adminTrigger.addEventListener('click', () => {
                const password = prompt('الرجاء إدخال كلمة المرور للوصول إلى لوحة التحكم:');
                if (password === '123123') {
                    window.location.href = 'admin.html';
                } else if (password) {
                    alert('كلمة مرور خاطئة.');
                }
            });
        }
    }
    </script>
</body>
</html>